@import mixins
@import reset
@import button_starter

@mixin conveadBtn()
  background: #f5f5f5 url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2Y1ZjVmNSIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNlY2VjZWMiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+)
  +gradient-vertical(#f5f5f5, #ececec)
  margin-left: -1px
  +box-shadow(inset 1px 1px 1px #fff)
  text-shadow: 0 1px rgba(255,255,255,.75)
  outline: none
  text-decoration: none
  &:hover
    +gradient-vertical(#f5f5f5, darken(#ececec,10%))

@mixin messagesList()
  margin: 0
  list-style: none
  overflow: auto
  font: 13px/16px Arial, Helvetica, sans-serif
  color: #5d5d5d
  border: 1px solid $borderColor

@mixin mutedBlock
  background: #eee
  color: lighten($textColor,10%)
  .convead-message-owner
    color: $textColor
    font-weight: normal
  .convead-message-datetime
    color: lighten($textColor, 20%)

@mixin highlightedBlock()
  border-bottom: 1px solid lighten($orange,35%)
  background: lighten($orange,45%)
  color: darken($orange,7%)
  .convead-message-datetime
    color: lighten($orange,10%)


.convead-client-reset
  +resetStyles

#convead_client_container
  //@extend %convead_notifications
  +buttonStarter
  //+conveadNotifications

  input, textarea, select
    font: 100% 'HelveticaNeueLight', Arial, Helvetica, Verdana, sans-serif
    vertical-align: middle
    color: #000
    margin: 0
    +box-sizing(border-box)
    +border-radius(0)

  // Basic widget window box

  .convead-client-backdrop
    position: fixed
    top: 0
    right: 0
    bottom: 0
    left: 0
    z-index: 9990
    background-color: #000
    +opacity(30)

  .convead-powered-by
    position: absolute
    bottom: -3px
    left: 16px
    font:
      size: 10px

  .convead-client-widget-window
    font-size: 14px
    line-height: 26px
    top: 50%
    left: 50%
    width: 604px
    height: 373px
    margin: -169px 0 0 -302px
    position: fixed
    z-index: 9999

    &.chat-standalone
      z-index: 9998
      top: 0
      left: 0
      margin: 0 0
      width: 304px
      .convead-client-lightbox
        width: 272px
        border: solid 2px #900

      textarea
        width: 230px

  .convead-client-lightbox
    width: 572px
    height: 338px
    background-color: #fff
    border: solid 2px $orange
    padding: 14px 14px 17px

    // TODO use sass shadow
    -webkit-box-shadow: 0 7px 16px rgba(2,2,2,.49)
    -moz-box-shadow: 0 7px 16px rgba(2,2,2,.49)
    box-shadow: 0 7px 16px rgba(2,2,2,.49)

    h1.convead-client-heading
      font-size: 18px
      font-weight: normal
      color: #21191f
      margin: 0 0 9px
      line-height: 24px

      span
        display: none
        padding: 4px 0 7px 43px
        background: url(<%= Settings.url %>images/#{$imgDir}/ico-ask-orange.png) no-repeat 2px 0

      span.notifications-text
        background: url(<%= Settings.url %>images/#{$imgDir}/ico-notifications-orange.png) no-repeat 3px 5px

      span.suggestion-text
        background: url(<%= Settings.url %>images/#{$imgDir}/ico-lamp.png) no-repeat 3px 0

      span.problem-text
        background: url(<%= Settings.url %>images/#{$imgDir}/ico-airplane.png) no-repeat 3px 0
        padding-left: 48px

    &.conversation .conversation-text
      display: block
    &.notifications > div
      margin: 0
    &.notifications .notifications-text
      display: block
    &.suggestion .suggestion-text
      display: block
    &.problem .problem-text
      display: block
    
   
    #convead_client_navigation_tabset
      padding: 0
      margin: 0 0 15px
      list-style: none
      width: 100%
      text-align: center
      font: 15px/18px 'helvetica_neuemedium', Arial, Helvetica, Verdana, sans-serif

      &:after
        display: block
        clear: both
        content: ""

      li
        float: left
        //width: 25%
        width: 50%
        &.inactive
          opacity: 0.5
        &:first-child a
          margin: 0
        & > a
          display: block
          padding: 4px 5px
          border: 1px solid #bbb
          color: #3f3f3f
          +conveadBtn
          -webkit-tap-highlight-color: $orange
          &.active
            background: #fff
            border-color: $orange
            color: $orange
            position: relative
            &:after
              top: -2px
              left: -2px
              right: -2px
              bottom: -2px
              position: absolute
              content: ""
              border: 1px solid $orange
              // TODO Use sass radius
              +border-radius(3px)

            &:before
              top: 100%
              left: 50%
              margin: 0 0 0 -10px
              position: absolute
              z-index: 2
              content: ""
              width: 21px
              height: 12px
              background: url(<%= Settings.url %>images/#{$imgDir}/sprite.png) no-repeat 0 -39px

    .convead-notifications-list
      @extend .icrm_chat_messages_list
      height: 252px !important

    .convead-notification-message
      @extend .convead-message
      display: block
    .convead-notification-read
      +opacity(70)

    .convead-popup,
    .convead-listing,
    .convead-notifications-list
      +messagesList
      height: 252px
      +box-sizing(border-box)
    
    .convead-listing
      list-style: none
      position: relative
      overflow-y: auto
      border: none

    .convead-popup
      padding: 8px

    .convead-popup-subject
      font-size: 16px
      font-weight: bold
      margin-bottom: 4px

    .convead-popup-datetime
      font-size: 12px
      color: lighten($textColor, 20%)

    .convead-popup-back-link
      font-size: 12px
      color: #08c
      &:hover
        color: darken(#08c,10%)

    .close-link
      top: 23px
      right: 19px
      width: 12px
      height: 12px
      overflow: hidden
      text-indent: -9999px
      z-index: 9999
      position: absolute
      background: url(<%= Settings.url %>images/#{$imgDir}/sprite.png) no-repeat -1px -19px

  #convead_client_navigation_tabs_content
    /* border:1px solid #a1a1a1; */
    /* border-width:1px 1px 0; */

  .convead_client-standalone_chat
    .icrm_chat_messages_list
      height: 218px

  .icrm_chat_messages_list
    //padding: 12px
    height: 174px
    +messagesList
    .convead-message.get-prev-messages
      font-size: 0.85em
      text-align: center
      cursor: pointer
      background: #e5e5e5
      &:hover
        background: #efefef
    .convead-message
      padding: 8px 8px 6px
      color: $textColor
      background: none
      border-bottom: 1px solid lighten($borderColor,10%)
      &.convead-sender-visitor
        +mutedBlock
      &.convead-sender-owner.convead-message-unread
        +highlightedBlock
      &.convead-message-read, .convead-message-unread
        &:first-child
          border-top: none
      &.convead-message-read
        opacity: 0.7
    .convead-message-datetime
      color: lighten($textColor,10%)
    .convead-message-owner
      color: #003cff
      font-weight: bold
    .convead-message-datetime
      font-size: 0.85em
      overflow: hidden

  form, fieldset
    margin: 0
    padding: 0
    border-style: none

  .chat_form
    width: 100%
    border-bottom: 1px solid $borderColor

    &:after
      display: block
      clear: both
      content: ""

    <%#.textarea%>
      <%#float: left%>
      <%#position: relative%>
      <%#border-bottom: none%>

    textarea
      resize: none
      font-size: 13px
      color: $textColor
      /* при значениях w/h 530/75 текстареа выглядит нормально на нашем сайте,
        но под 9м эксплорером разъезжается
        при значениях 517/61 текстареа выглядела абсолютно нормально на оригинальном сайте
        откуда брался дизайн, и выглядит нормально под эксплорером, но на нашем сайте
        она мелковата и не достает до границ дива куда помещена
      width: 530px
      height: 75px
      //max-height: 61px
      padding: 6px 4px 8px 7px
      float: left
      overflow: auto
      border-left: 1px solid $borderColor
      border-top: 0
      border-right: 0
      border-bottom: none

      &.text-active
        color: #333

    input[type="submit"]
      float: right
      width: 42px
      height: 75px
      border: 0
      background: url(<%= Settings.url %>images/#{$imgDir}/sprite.png) no-repeat -40px 0
      padding: 0
      text-indent: -9999px
      overflow: hidden
      cursor: pointer
      font-size: 0
      line-height: 0
      border-right: 1px solid $borderColor
      border-left: 1px solid $borderColor
      opacity: 1.0
      -webkit-tap-highlight-color: $orange

  .respond-form2
    width: 100%

    &:after
      display: block
      clear: both
      content: ""

    .textarea
      float: left
      position: relative

    textarea
      font-size: 13px
      color: $textColor
      width: 572px !important
      height: 186px !important
      max-height: 186px
      padding: 6px 4px 5px 7px
      float: left
      margin-bottom: 11px
      border: 1px solid $borderColor
      border: 1px solid 1px solid #a1a1a1
      /* border-bottom: 1px solid $borderColor */

      &.text-active
        color: #333

  .respondbutton
    display: block !important
    border: 1px solid #5c5c5c
    margin: 2px 11px 2px 0
    padding: 2px 12px 0px 11px
    background: url('<%= Settings.url %>images/respondbutton-bg.png') repeat-x top left
    color: #fff
    float: left

    &:hover
      background: url('<%= Settings.url %>images/respondbutton-bg-hover.png') repeat-x top left
      text-decoration: none

  .addlink
    display: block
    font-size: 12px
    color: #0093D8
    margin-left: 113px

  .addfile img
    margin-top: 30px
    display: block

  .popup-holder
    position: relative
    overflow: hidden
    height: 0

  .icrm_chat_avatar
    margin:
      left: - ($avatarSize + 10px)
      right: 10px

  .icrm_chat_subject
    font-size: 14px
    margin-bottom: 4px

  .window_close
    position: absolute
    z-index: 9999
    width: 12px
    height: 12px
    top: 20px
    right: 19px
    background: url(<%= Settings.url %>images/#{$imgDir}/sprite.png) no-repeat -1px -19px

  .pull-right
    float: right
  .pull-left
    float: left

  .cl
    clear: both

  .clearfix
    &:before,
    &:after
      content: " "
      display: table
    &:after
      clear: both

